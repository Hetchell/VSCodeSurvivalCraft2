<Command>
	<Topic Title="命令方块开发">
		API命令方块mod作者:陽叁疯。
		
		部分功能由再回首zh编写。
		
		如果你要反馈bug或提建议，
		
		可以加入qq群聊：883278545。
	</Topic>
	<Topic Title="命令方块介绍">
		命令方块可以通过电路控制，
		根据特定的指令来实现对应的游戏效果。
		
		命令方块有两种工作模式：
		
		默认模式：
		六个面可接收电信号，效果均相同，
		输入高压（对应模拟信号8～f）时提交指令；
		
		指令变量模式：
		在指令前输入$符号会激活指令变量功能，
		此时命令方块会识别大写字母X/Y/V/W作为指令变量，
		前后左右四个面接收的电信号分别为对应的指令变量赋值。
		底面作为时钟端，功能规则与电路板相同，
		底面不接线为异步状态，
		输入的电信号发生改变且不都为0则提交指令；
		底面接线为同步状态，
		此时只有底端接收到上升沿信号才会进行变量赋值并提交指令。
		顶面为输出端。
		
		指令前输入$标识符后，命令方块的光点贴图会发生变化，
		四个面分别出现X/Y/V/W记号，代表激活了指令变量功能，
		此时提交指令会给大写字母X,Y,V,W代入具体数值。
		去掉$符号则恢复原状，回到默认模式。
		
		
		此外，还有其他功能等你去发现！
	</Topic>
	<Topic Title="新手入门指引">
		点开命令方块，键入“help”，用按钮连接命令方块，
		按下按钮会弹出显示所有指令的界面，点击指令可复制。

		输入“debugmode true”进入debug模式。
		debug模式可获取方块的标准坐标与完整值，
		以及查看掉落物id与实体(生物)注册名，等等。

		另，在物品栏找到命令辅助棒，
		手持命令辅助棒可直接进入debug模式，
		用棒子点击方块可获取方块信息。
		点击右上角编辑框可快速查看指令列表。


		相关指令的使用示例：

		tp x y z，将玩家传送到坐标(x,y,z)。
		示例：tp -100 69 57
		表示传送玩家到世界坐标(-100,69,57)。

		place x y z i，在坐标(x,y,z)放置id为i的方块。
		示例：place 1236 65 508 46
		表示在世界坐标(1236,65,508)放置一个铁块(id为46)。
		示例：place 0 5 0 46 @C
		后面加“@C”表示以命令方块位置为参考坐标(0,0,0),
		在相对于命令方块位置的(0,5,0)坐标放置铁块，
		即在命令方块上方第5格放置一个铁块。

		addentity x y z n，在坐标(x,y,z)添加实体。
		示例：addentity 3 0 0 Duck @pl
		后面加“@pl”表示以玩家当前位置为参考坐标(0,0,0),
		在玩家位置的X轴正方向第3格添加一只鸭子。

		removenpc，移除视距内的所有动物。
		removenpc n，为延伸指令，移除指定的动物。
		移除所有动物的示例指令：removenpc
		移除所有老虎的示例指令：removenpc Tiger
		移除单只老虎的示例指令：removenpc Tiger:3
		用命令辅助棒点击动物可查看其编号。
	</Topic>
	<Topic Title="指令字母含义">
		x,y,z代表坐标(在sc中y为纵轴)，
		i通常代表方块id或完整值，
		c通常代表数量，
		s通常代表序号，
		t通常代表类型，
		m通常代表一段任意的文本信息，
		n通常代表动物的实体名，
		f通常代表文件名(有时包括路径)，
		v通常代表一个整数值，
		b通常代表是或否，取值为true或false两种。
		
		特别的，keyword代表属性关键字，value代表对应的值，
		value的取值可能随着keyword的改变而改变。
		带有keyword与value字样的指令有分级指令列表界面。
	</Topic>
	<Topic Title="指令书写格式">
		以空格为分隔符，参照指令列表。

		所有符号请使用英文符号。

		所有数值都填整数，没有小数形式。
	</Topic>
	<Topic Title="指令变量说明">
		在指令变量模式中，
		大写的英文字母X,Y,V,W为可识别的指令变量，
		其值取决于对应面输入的电信号值，
		X面输入的电信号即为变量X在指令中的值，
		Y面输入的电信号即为变量Y在指令中的值，
		V面输入的电信号即为变量V在指令中的值，
		W面输入的电信号即为变量W在指令中的值。
		变量不存在并不影响，具体自行测试寻找规则。

		四个变量仅是变量标识，无优先级之分，与坐标无直接关系。
		可自由组合，重复使用，支持表达式的四则运算。

		示例指令：$place 16*W+X 50 50 46，
		在底面不接线（异步状态）时，有：

		当X面输入信号4，W面不输入(对应信号0)，
		则会赋值并提交指令 place 16*0+4 50 50 46,
		即此时相当于提交指令 place 4 50 50 46

		当W面输入信号1，X面输入信号4，同时输入，
		则会赋值并提交指令 place 16*1+4 50 50 46,
		即此时相当于提交指令 place 20 50 50 46


		模拟信号：1,2,3,4,5,6,7,8,9,A,B,C,D,E,F
		分别对应数值：1,2,3,4,5,6,7,8,9,10,11,12,13,14,15


		四个变量可以自由组合，像下面这些指令都是可行的。
		$place W*X 2*X+2 3*Y+W 46 @C
		$place X*X+1 W+W+W XY V*1024+8 @pl
		$place WXY 64+W*16*16+X*16+Y 125 46
		$place -128+W*16+Y 60+X/2 -658+Y/X*3 46


		命令方块接入电线与各个面的对应关系：
		命令方块与电路板的电线连接方式有所不同，判断规则为：
		与电线所在直线垂直的相接面就是该电线所连接的面。


		同步状态(底面接线)的应用说明:

		命令方块在提交指令时，0.02s内提交的指令才算同时提交，
		超过这个时间的都不算同时提交。
		如果要做一些大型、精准的电路相关装置，就必须考虑这个问题：
		信号每经过一个电路板或一段“独立”导线时，会延迟0.01s。

		解决方式就是底面接线，让命令方块处于同步状态。
		同步状态下只有底面接收到上升沿信号才会提交指令，
		否则，不管水平四个面接收的信号如何改变，都不会误提交指令。
	</Topic>
	<Topic Title="坐标形式说明">
		游戏分标准坐标与相对坐标，多种坐标综合使用，默认标准坐标。

		标准坐标：以世界为参考系，即在世界中的坐标，
		指令形式如下：place x y z i，
		表示在世界坐标(x,y,z)放置id为i的方块。

		相对坐标（分以下三种）：
		
		1.以当前命令方块为参考系，相对于命令方块的坐标：
		在指令后加@C，C不分大小写，例如：place x y z i @C
		
		2.以当前玩家为参考系，相对于玩家的坐标：
		在指令后加@pl，pl不分大小写，例如：place x y z i @pl
		
		3.以动物为参考系，相对于动物的坐标：
		在指令后加@指定动物实体名，
		例如：place x y z i @动物实体名
		
		
		以命令方块为参考系的坐标：
		例如命令方块上方第3格的位置，坐标为(0,3,0)。
		
		以玩家为参考系的坐标：
		例如玩家正X轴方向第3格的位置，坐标为(3,0,0)。
		
		以动物为参考系的坐标，例如在老虎脚下放置铁块，
		对应指令为place 0 -1 0 46 @Tiger。
	</Topic>
	<Topic Title="关于调试模式">
		调试模式方便玩家获取方块的标准坐标与完整值，
		以及查看掉落物id与实体(生物)注册名等。
		
		使用方法：
		开启debug模式后，空手点击任意方块就会显示
		该方块信息以及靠近该方块的掉落物id；
		
		点击放置的家具可获得对应的家具序号；
		
		点击衣物掉落物可获得对应的衣物序号；
		
		点击实体可获取其注册名及编号，
		其中编号是临时的，用于指定单一个体。
		
		手持命令辅助棒可直接进入调试模式，
		与空手不同的是，点击屏幕空气可获取玩家的标准坐标；
		
		点击编辑框快速查看指令列表，其中指令可复制，
		还可以快速开启与关闭指令功能。
	</Topic>
	<Topic Title="实体临时编号">
		游戏中会分别给动物和船编号，用于指定单一个体。
		该编号是临时的，会随视距内的实体数量改变而改变。

		对于包含字母n且代表实体名的指令，都有：
		n若为动物名，指定该类所有动物。
		n若为动物名加编号，指定单一动物。

		例如指令：kill n，杀死名为n的动物。
		示例：kill Tiger，代表杀死所有老虎。
		示例：kill Tiger:3，代表杀死编号为3的老虎个体。

		另：用命令辅助棒点击动物可获得其实体名和编号。
	</Topic>
	<Topic Title="资源路径说明">
		命令方块能外部读取相关资源，
		有一个特定的资源路径：SurvivalCraft2.2/Command
		把图片(材质)、pak文件(模型)、音频、方块文件放入
		SurvivalCraft2.2/Command文件夹中，
		对应的指令就能读取并执行。

		除此之外，存档目录下的资源文件也能读取，且是优先的。

		即资源的一般查找规则：
		通过文件名查找，先查找存档路径下的文件，
		如果没有，则查找Command路径下的文件。


		部分文件处理的相关指令：

		write m
		以覆盖重写的方式将内容写入
		Survivalcraft2.2/Command目录下的command.txt文件。
		如果没有Command文件夹，游戏会自动创建，
		如果没有command.txt文件，也会自动创建。

		writeappend m
		以文本追加的形式将内容写在
		Survivalcraft2.2/Command/command.txt后面。

		read c
		读取Survivalcraft2.2/Command/command.txt文件
		的第c行并显示在屏幕。

		copyfile f
		将Survivalcraft2.2/Command目录下名为f的文件
		复制到存档目录下，方便打包带有资源的存档并分享。
	</Topic>
	<Topic Title="条件判断指令说明">
		命令方块还有一种特别的工作模式，条件判断模式。
		当输入的指令为条件判断指令时，
		命令方块会自动变为判断条件是否成立的工作状态。
		实时判断，每0.2s判断一次，并输出对应的结果。
		
		
		在该状态下，如果指令不带有‘$’符号，则为默认的输出模式：
		六个面都变为输出端，输出的结果相同，
		条件成立输出F，不成立输出0。
		
		如果指令带有‘$’符号，则为指令变量的输出模式：
		水平四个面(X,Y,V,W面)为输入端，
		接收电信号并为对应的变量赋值；
		底面为时钟端，
		若接线则只有底面接收到上升沿信号才会进行条件判断；
		顶面为输出端，
		条件成立输出F，不成立输出0。
		也就是说，条件判断的工作模式也支持指令变量功能。
		
		
		示例指令：place? 0 -1 0 46 @pl
		以玩家位置为相对坐标，判断玩家下方一格，
		即玩家脚下的方块是否为铁块(id为46)。
		当玩家下方一格出现铁块时，命令方块会输出电信号F。
	</Topic>
	<Topic Title="像素画生成指令详解">
		image x y z f 为像素画生成指令。
		
		查找Survivalcraft2.2/Command目录或存档目录下
		名为f的png格式图片，以(x,y,z)为生成起始点，
		在世界中生成等比例的像素图。

		色彩匹配时，使用颜色最接近的粘土方块，
		其中图片透明部分以空气方块代替。

		jpg格式图片可以在p图软件转格式或者在线转换，
		不要直接改后缀。

		Command文件夹一般需要自己手动创建，
		电脑在游戏根目录下创建。
		也可以在命令方块输入指令：
		write 我好笨啊，连文件夹都不会创建

		此时游戏会帮你创建，
		接着把png格式图片放入Command文件夹即可。

		因为是等比例生成，考虑到游戏限高与视距限制，
		建议把图片分辨率压低点。

		图片默认竖向生成，
		在image指令后加上/tile可以生成平铺的像素图，
		加上/rotate可以生成侧向的像素图。
		
		示例指令：image 50 50 50 吃瓜.png /tile @C
		(Command文件夹下放一张名为“吃瓜”的png格式图片)
	</Topic>
	<Topic Title="图案生成指令详解">
		pattern x y z f t v 为图案生成指令。
		
		查找Survivalcraft2.2/Command目录或存档目录下
		名为f的png格式图片，以(x,y,z)为生成中心点，
		在世界中生成临时的贴图。

		jpg格式图片可以在p图软件转格式或者在线转换，
		不要直接改后缀，否则图片颜色会变。
		
		t为生成的图片方向，取1至6整数，对应方块六个不同的面。

		v为生成图片的大小，取10时与一个方块贴图等大，
		取30就是3x3的方块大小，其他类推。
		
		贴图为临时的，退档重进贴图会消失。
		这里，当v取0时，也会移除贴图。
		也可用指令removepattern移除贴图。

		
		示例指令：pattern 5 5 5 吃瓜.png 1 30 @C
		(Command文件夹下放一张名为“吃瓜”的png格式图片)
	</Topic>	
	<Topic Title="音频播放指令详解">
		audio f v p 为播放音频指令。
		
		f为音频文件名，v为音量，p为音高，
		v、p有效取值范围为0-15。
		
		支持外部调用存档目录或Survivalcraft2.2/Command
		目录下的wav和ogg格式音频文件，
		也支持内部调用Content.pak里的所有音效。
		
		外部调用: f为存档目录或Command目录里
		的ogg或wav格式文件名(需加后缀)。
		
		内部调用: f为Content/Audio里
		的音效文件路径名(不加后缀)。
		
		声音大小还由玩家与命令方块的距离决定，
		对应的命令方块为发声源。
		若省略p，即audio f v。
		此时声音只与v有关，无距离限制，可作为背景音乐。
		
		功能全覆盖音乐板，可自定义乐器，自定义八度。
		
		对于wav格式的“乐器“音频文件，
		p与v的取值规则基本与音乐板的p端和v端相同。
		即p=0、 2、4、5、7、9、11(b)分别对应
		do、re、mi、fa、 so、 la、xi (钢琴)，
		p=15时无声音发出。
		v的值取0到15，0为静音，15为最大响度。
	</Topic>
	<Topic Title="建筑生成指令详解">
		build x y z f 为建筑生成指令。

		读取存档目录或Survivalcraft2.2/Command目录下
		的方块文件，以(xy,z)为生成起始点，生成对应的建筑。

		示例：build 1 0 1 小丑房.txt @C

		在执行此指令之前，需得到方块文件“小丑房.txt”。

		方块文件由指令getcell x1 y1 z1 to x2 y2 z2获得。
		(x1,y1,z1)和(x2,y2,z2)两点确定导出方块的区域，
		将方块(相对)坐标与完整值写入本地文件“cell.txt”
		最后将“cell.txt”重命名为“小丑房.txt”
		即可执行上述的建筑生成指令，效果相当于复制粘贴。
	</Topic>
	<Topic Title="模型更换指令详解">
		model n f 可以更换指定动物的模型。
		n为动物实体名（用"pl"表示玩家），
		f为存档目录或Survivalcraft2.2/Command目录
		下模型pak文件中的模型路径名。  
		
		模型文件需打包成pak文件才能有效读取，
		可以多个打包，也可以一个一个打包，路径名不重复即可。  
		示例：将 m1.dae、m2.dae、m3.dae 打包为“模型集.pak”，
		再将“模型集.pak”放入Command文件夹，
		则调用模型m1的指令为：model Tiger 模型集/m1，
		即将老虎模型换为m1模型。
		
		同时支持内部调用Content.pak的模型，
		此时f为Content/Models中的模型名，
		比如将狮子模型换为驴模型，
		指令为：model Lion  Donkey，
		Lion为狮子的实体名，
		Donkey为Content/Models下的驴模型文件名。 
	</Topic>
	<Topic Title="三大动态修改指令说明">
		三条指令的修改效果都是临时的，
		方块与衣物类修改后需重启游戏才会恢复原状，
		生物类比较特殊，退档重进游戏就会恢复原状，
		动物过视距刷新也会，注意一下。
		
		三条指令的属性关键词未一一测试，
		也没完善的数值输入限制与处理，
		尽量不要乱填值，按要求来。
		可能存在bug，后期慢慢完善。
		
		如果因为误操作引起游戏卡死或闪退，
		重启游戏即可，一切都会恢复原状。
		但保险起见，如果经常用，建议备份存档。
	</Topic>
</Command>